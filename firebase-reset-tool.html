<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¥ Firebase Database ì´ˆê¸°í™” ë„êµ¬ ğŸ”¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        .warning p {
            color: #856404;
            line-height: 1.6;
        }

        .section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        button {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-danger {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
            color: white;
        }

        .btn-warning:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(255, 152, 0, 0.4);
        }

        .btn-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-info:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .log {
            margin-top: 20px;
            padding: 15px;
            background: #1e1e1e;
            color: #4ec9b0;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 300px;
            overflow-y: auto;
        }

        .log-entry {
            margin: 5px 0;
        }

        .log-success {
            color: #4ec9b0;
        }

        .log-error {
            color: #ff6b6b;
        }

        .log-info {
            color: #61afef;
        }

        .checkbox-container {
            margin: 15px 0;
        }

        .checkbox-container label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 1.1em;
        }

        .checkbox-container input[type="checkbox"] {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¥ Firebase Database ì´ˆê¸°í™”</h1>
        <p style="color: #666; margin-bottom: 20px;">Python Learning System ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬</p>

        <div class="warning">
            <h3>âš ï¸ ì£¼ì˜ì‚¬í•­</h3>
            <p>
                ì‚­ì œëœ ë°ì´í„°ëŠ” <strong>ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!</strong><br>
                ì‹ ì¤‘í•˜ê²Œ ì„ íƒí•˜ì‹œê³ , ì¤‘ìš”í•œ ë°ì´í„°ëŠ” ë¨¼ì € ë°±ì—…í•˜ì„¸ìš”.
            </p>
        </div>

        <div class="section">
            <h2>ğŸ“Š í˜„ì¬ ë°ì´í„° í™•ì¸</h2>
            <button class="btn-info" onclick="checkData()">ë°ì´í„° í™•ì¸í•˜ê¸°</button>
        </div>

        <div class="section">
            <h2>ğŸ—‘ï¸ ì„ íƒì  ì‚­ì œ</h2>
            
            <div class="checkbox-container">
                <label>
                    <input type="checkbox" id="confirm-delete">
                    <span>ìœ„ ì£¼ì˜ì‚¬í•­ì„ ì½ì—ˆìœ¼ë©°, ì‚­ì œí•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤</span>
                </label>
            </div>

            <button class="btn-warning" onclick="deleteStudents()" id="btn-students" disabled>
                í•™ìƒ ë°ì´í„° ì‚­ì œ (students/)
            </button>
            <button class="btn-warning" onclick="deleteQuestions()" id="btn-questions" disabled>
                ë¬¸ì œ ë°ì´í„° ì‚­ì œ (questions/)
            </button>
            <button class="btn-danger" onclick="deleteAll()" id="btn-all" disabled>
                âš ï¸ ì „ì²´ ë°ì´í„° ì‚­ì œ
            </button>
        </div>

        <div class="log" id="log">
            <div class="log-entry log-info">ğŸ”· ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ë„êµ¬ ì¤€ë¹„ ì™„ë£Œ</div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        // Firebase ì„¤ì •
        const firebaseConfig = {
          apiKey: "AIzaSyCArugpRutP-p39h0ambLwH8WJnWjVI1GA",
          authDomain: "ecis-management-department.firebaseapp.com",
          databaseURL: "https://ecis-management-department-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "ecis-management-department",
          storageBucket: "ecis-management-department.firebasestorage.app",
          messagingSenderId: "707215389052",
          appId: "1:707215389052:web:80afb7c8950196f8ed34f9",
          measurementId: "G-L28PVYWV5M
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // ë¡œê·¸ ì¶”ê°€ í•¨ìˆ˜
        function addLog(message, type = 'info') {
            const log = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `${new Date().toLocaleTimeString()} - ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // ì²´í¬ë°•ìŠ¤ ìƒíƒœ í™•ì¸
        document.getElementById('confirm-delete').addEventListener('change', function() {
            const buttons = ['btn-students', 'btn-questions', 'btn-all'];
            buttons.forEach(btnId => {
                document.getElementById(btnId).disabled = !this.checked;
            });
        });

        // ë°ì´í„° í™•ì¸
        async function checkData() {
            addLog('ğŸ” ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸ ì¤‘...', 'info');
            
            try {
                const snapshot = await database.ref('/').once('value');
                const data = snapshot.val();
                
                if (!data) {
                    addLog('ğŸ“­ ë°ì´í„°ë² ì´ìŠ¤ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤', 'success');
                    return;
                }

                // students í™•ì¸
                if (data.students) {
                    const studentCount = Object.keys(data.students).length;
                    addLog(`ğŸ‘¥ í•™ìƒ ë°ì´í„°: ${studentCount}ëª…`, 'info');
                } else {
                    addLog('ğŸ‘¥ í•™ìƒ ë°ì´í„°: ì—†ìŒ', 'info');
                }

                // questions í™•ì¸
                if (data.questions) {
                    let totalQuestions = 0;
                    for (let category in data.questions) {
                        const count = Object.keys(data.questions[category]).length;
                        totalQuestions += count;
                        addLog(`ğŸ“ ${category}: ${count}ê°œ ë¬¸ì œ`, 'info');
                    }
                    addLog(`ğŸ“ ì´ ë¬¸ì œ ìˆ˜: ${totalQuestions}ê°œ`, 'info');
                } else {
                    addLog('ğŸ“ ë¬¸ì œ ë°ì´í„°: ì—†ìŒ', 'info');
                }

                addLog('âœ… ë°ì´í„° í™•ì¸ ì™„ë£Œ!', 'success');
                
            } catch (error) {
                addLog(`âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // í•™ìƒ ë°ì´í„° ì‚­ì œ
        async function deleteStudents() {
            if (!confirm('âš ï¸ í•™ìƒ ë°ì´í„°ë¥¼ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                addLog('ğŸš« í•™ìƒ ë°ì´í„° ì‚­ì œ ì·¨ì†Œë¨', 'info');
                return;
            }

            addLog('ğŸ—‘ï¸ í•™ìƒ ë°ì´í„° ì‚­ì œ ì¤‘...', 'info');
            
            try {
                await database.ref('students').remove();
                addLog('âœ… í•™ìƒ ë°ì´í„° ì‚­ì œ ì™„ë£Œ!', 'success');
            } catch (error) {
                addLog(`âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ë¬¸ì œ ë°ì´í„° ì‚­ì œ
        async function deleteQuestions() {
            if (!confirm('âš ï¸ ë¬¸ì œ ë°ì´í„°ë¥¼ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                addLog('ğŸš« ë¬¸ì œ ë°ì´í„° ì‚­ì œ ì·¨ì†Œë¨', 'info');
                return;
            }

            addLog('ğŸ—‘ï¸ ë¬¸ì œ ë°ì´í„° ì‚­ì œ ì¤‘...', 'info');
            
            try {
                await database.ref('questions').remove();
                addLog('âœ… ë¬¸ì œ ë°ì´í„° ì‚­ì œ ì™„ë£Œ!', 'success');
            } catch (error) {
                addLog(`âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ì „ì²´ ë°ì´í„° ì‚­ì œ
        async function deleteAll() {
            const confirmText = prompt('âš ï¸ ì „ì²´ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ë ¤ë©´ "DELETE"ë¥¼ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”:');
            
            if (confirmText !== 'DELETE') {
                addLog('ğŸš« ì „ì²´ ì‚­ì œ ì·¨ì†Œë¨ (í™•ì¸ ë¬¸êµ¬ ë¶ˆì¼ì¹˜)', 'info');
                return;
            }

            if (!confirm('âš ï¸âš ï¸âš ï¸ ìµœì¢… í™•ì¸!\n\nì •ë§ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ì ˆëŒ€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                addLog('ğŸš« ì „ì²´ ì‚­ì œ ì·¨ì†Œë¨', 'info');
                return;
            }

            addLog('ğŸ—‘ï¸ ì „ì²´ ë°ì´í„° ì‚­ì œ ì¤‘...', 'info');
            
            try {
                await database.ref('/').remove();
                addLog('âœ… ì „ì²´ ë°ì´í„° ì‚­ì œ ì™„ë£Œ!', 'success');
                addLog('ğŸ“­ ë°ì´í„°ë² ì´ìŠ¤ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤', 'success');
            } catch (error) {
                addLog(`âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ì´ˆê¸° ë°ì´í„° í™•ì¸
        window.onload = function() {
            addLog('ğŸ”· Firebase ì—°ê²° ì™„ë£Œ', 'success');
            addLog('ğŸ’¡ "ë°ì´í„° í™•ì¸í•˜ê¸°" ë²„íŠ¼ì„ ëˆŒëŸ¬ í˜„ì¬ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”', 'info');
        };
    </script>
</body>
</html>
